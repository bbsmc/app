---
title: OAuth 使用指南
description: 使用 BBSMC OAuth 代表用户与 API 交互的指南。
---

BBSMC 允许开发者创建应用程序，一旦获得 BBSMC 用户授权，开发者就可以代表用户与 API 进行交互。用于获取 API 令牌的流程基于 OAuth 2 协议。建议大多数人使用现有的 OAuth 库来处理身份验证。如果您想从头实现，您需要查看 [RFC 6749]。如果应用程序的唯一用户是您自己，个人访问令牌（PAT）可能更合适。

如果您熟悉 OAuth 2，以下是您需要的 URL：

| 名称               | URL                                              |
|--------------------|--------------------------------------------------|
| 授权页面            | `https://modrinth.com/auth/authorize`            |
| 令牌交换            | `https://api.modrinth.com/_internal/oauth/token` |

流程通常如下所示：

1. 用户被重定向到 BBSMC 以授权您的应用程序
2. 授权后，用户被重定向回您的网站，并带有授权码
3. 您的后端将此代码交换为访问令牌

## 注册您的应用程序

首先，您需要在 BBSMC 系统中[注册应用程序]。这里选择的设置以后总是可以更改的。您需要选择所需的权限，称为作用域（scopes）。出于安全原因，您只需要选择您需要的作用域。请参阅[最小权限原则]。

除了名称和作用域，您还需要添加一个或多个重定向 URI。这些是用户授权您的应用程序后可以重定向到的 URI。

注册应用程序后，重要的是要在安全的地方记下客户端密钥。如果客户端密钥泄露，重要的是您要重新生成它以确保授权用户的安全。如果您的客户端密钥或访问令牌被发现暴露在外，您的应用程序可能会在没有事先通知的情况下被禁用。

## 获取授权

一旦用户准备授权您的应用程序，您需要构建一个 URL 将他们重定向到。BBSMC 的授权 URL 是 `https://modrinth.com/auth/authorize`，带有以下查询参数：

| 参数            | 描述                                                                                         |
|-----------------|----------------------------------------------------------------------------------------------|
| `client_id`     | 您的应用程序的客户端 ID                                                                      |
| `redirect_uri`  | 授权后用户应被重定向到的 URI。必须与您在应用程序设置中添加的重定向 URI 之一匹配               |
| `scope`         | 您请求的作用域，用空格分隔。必须是您的应用程序被授权的作用域的子集                           |
| `state`         | 一个随机字符串，用于防止 CSRF 攻击。当用户被重定向回您的站点时，应验证此值                    |

[RFC 6749]: https://tools.ietf.org/html/rfc6749
[注册应用程序]: https://modrinth.com/settings/applications
[最小权限原则]: https://en.wikipedia.org/wiki/Principle_of_least_privilege